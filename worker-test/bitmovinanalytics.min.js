/*!
 * 
 * Copyright (C) 2017, Bitmovin, Inc., All Rights Reserved
 * 
 * This source code and its use and distribution, is subject to the terms
 * and conditions of the applicable license agreement.
 * 
 * bitmovinanalytics version v1.4.4-20-g42b2c38
 * 
 * 
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var a=e();for(var s in a)("object"==typeof exports?exports:t)[s]=a[s]}}(this,function(){return function(t){function e(s){if(a[s])return a[s].exports;var i=a[s]={exports:{},id:s,loaded:!1};return t[s].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}var i=a(1),n=s(i),r=a(21),o=s(r),l=a(22),E=s(l),u=void 0,S=function(t){u.register(t)},f=function(){return u.getCurrentImpressionId()},d=function(t){return u=new n.default(t),{register:S,getCurrentImpressionId:f,setCustomData:u.setCustomData,setCustomDataOnce:u.setCustomDataOnce}};window.bitmovin=window.bitmovin||{},window.bitmovin.analytics=d,window.bitmovin.analytics.Players=o.default,window.bitmovin.analytics.CdnProviders=E.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=a(2),l=s(o),E=a(5),u=s(E),S=a(6),f=s(S),d=a(7),m=s(d),c=a(8),A=s(c),h=a(14),N=s(h),p=a(19),I=s(p),T=a(20),_=s(T),U=function(){function t(e){var a=this;i(this,t),this.setCustomDataOnce=function(t){var e=a.config;a.setCustomData(t),a.setCustomData(e)},this.setCustomData=function(t){var e=function(t){var e=t.customData1,a=t.customData2,s=t.customData3,i=t.customData4,n=t.customData5,r=t.experimentName,o={};return e&&(o.customData1=e),a&&(o.customData2=a),s&&(o.customData3=s),i&&(o.customData4=i),n&&(o.customData5=n),r&&(o.experimentName=r),o};a.sendAnalyticsRequestAndClearValues(),a.config=n({},a.config,e(t)),a.setConfigParameters()},this.register=function(t){if(a.analyticsStateMachine=a.analyticsStateMachineFactory.getAnalyticsStateMachine(t,a.stateMachineCallbacks),a.adapter=a.adapterFactory.getAdapter(t,a.record,a.analyticsStateMachine),!a.adapter)return void m.default.error("Could not detect player.")},this.getCurrentImpressionId=function(){return a.sample.impressionId},this.record=function(t,e){e=e||{},a.analyticsStateMachine.callEvent(t,e,a.utils.getCurrentTimestamp())},this.setDroppedFrames=function(t){a.utils.validNumber(t.droppedFrames)&&(a.sample.droppedFrames=0)},this.config=e,this.licenseCall=new l.default,this.analyticsCall=new u.default,this.utils=new f.default,this.adapterFactory=new A.default,this.analyticsStateMachineFactory=new N.default,this.castClient=new I.default,this.castReceiver=new _.default,this.droppedSampleFrames=0,this.licensing="waiting",this.startupTime=0,this.pageLoadType=t.PAGE_LOAD_TYPE.FOREGROUND,this.autoplay=void 0,this.isCastClient=!1,this.isCastReceiver=!1,this.isAllowedToSendSamples=!1,this.samplesQueue=[],this.config.cast&&this.config.cast.receiver&&(this.isCastReceiver=!0,this.castReceiver.setUp(),this.castReceiver.setCallback(function(e){switch(e.type){case t.CAST_RECEIVER_CONFIG_MESSAGE:a.castClientConfig=e.data,a.updateSampleToCastClientConfig(a.sample,a.castClientConfig),a.updateSamplesToCastClientConfig(a.samplesQueue,e.data),a.isAllowedToSendSamples=!0}})),this.setPageLoadType(),this.setupSample(),this.init(),this.setupStateMachineCallbacks()}return r(t,[{key:"updateSamplesToCastClientConfig",value:function(t,e){for(var a=0;a<t.length;a++)this.updateSampleToCastClientConfig(t[a],e)}},{key:"updateSampleToCastClientConfig",value:function(t,e){var a=e.config,s=e.userId,i=e.impressionId,n=e.domain,r=e.path,o=e.language,l=e.userAgent;t.impressionId=i,t.userId=s,t.userAgent=l,t.domain=n,t.path=r,t.language=o,this.setConfigParameters(t,a)}},{key:"setPageLoadType",value:function(){var e=this;window.setTimeout(function(){document[e.utils.getHiddenProp()]===!0&&(e.pageLoadType=t.PAGE_LOAD_TYPE.BACKGROUND)},t.PAGE_LOAD_TYPE_TIMEOUT)}},{key:"init",value:function(){return this.isCastReceiver||""!=this.config.key&&this.utils.validString(this.config.key)?(m.default.setLogging(this.config.debug||!1),this.isCastReceiver?this.licensing="granted":this.checkLicensing(this.config.key),this.setConfigParameters(),void this.setUserId()):void console.error("Invalid analytics license key provided")}},{key:"setConfigParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.sample,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config;t.key=e.key,t.playerKey=e.playerKey,t.player=e.player,t.cdnProvider=e.cdnProvider,t.videoId=e.videoId,t.customUserId=e.userId,t.customData1=this.utils.getCustomDataString(e.customData1),t.customData2=this.utils.getCustomDataString(e.customData2),t.customData3=this.utils.getCustomDataString(e.customData3),t.customData4=this.utils.getCustomDataString(e.customData4),t.customData5=this.utils.getCustomDataString(e.customData5),t.experimentName=e.experimentName}},{key:"setUserId",value:function(){var t=this.utils.getCookie("bitmovin_analytics_uuid");t&&""!==t?this.sample.userId=t:(document.cookie="bitmovin_analytics_uuid="+this.utils.generateUUID(),this.sample.userId=this.utils.getCookie("bitmovin_analytics_uuid"))}},{key:"setupStateMachineCallbacks",value:function(){var e=this;this.stateMachineCallbacks={setup:function(t,a,s){if(e.isCastReceiver||(e.sample.impressionId=e.utils.generateUUID()),e.setDuration(t),e.setState(a),e.sample.playerStartupTime=t,e.sample.pageLoadType=e.pageLoadType,window.performance&&window.performance.timing){var i=e.utils.getCurrentTimestamp()-window.performance.timing.navigationStart;e.sample.pageLoadTime=i,m.default.log("Page loaded in "+i+"ms")}e.startupTime=t,e.setPlaybackSettingsFromLoadedEvent(s),e.sendAnalyticsRequestAndClearValues(),e.sample.pageLoadType=e.pageLoadType,e.sample.pageLoadTime=0},ready:this.utils.noOp,startup:function(t,a){e.setDuration(t),e.sample.videoStartupTime=t,e.setState(a),e.startupTime+=t,e.sample.startupTime=e.startupTime,e.sample.autoplay=e.autoplay,e.sendAnalyticsRequestAndClearValues(),e.sample.autoplay=void 0},playing:function(t,a,s){e.setDuration(t),e.setState(a),e.sample.played=t,e.setDroppedFrames(s),e.sendAnalyticsRequestAndClearValues()},playingAndBye:function(t,a,s){e.setDuration(t),e.setState(a),e.sample.played=t,e.setDroppedFrames(s),e.sendUnloadRequest()},heartbeat:function(t,a,s){e.setDroppedFrames(s),e.setState(a),e.setDuration(t),e.sample.played=e.sample.duration,e.sendAnalyticsRequestAndClearValues()},qualitychange:function(t,a){e.setDuration(t),e.setState(a),e.sendAnalyticsRequestAndClearValues()},qualitychange_pause:function(t,a){e.setDuration(t),e.setState(a),e.sendAnalyticsRequestAndClearValues()},qualitychange_rebuffering:function(t,a){e.setDuration(t),e.setState(a),e.sendAnalyticsRequestAndClearValues()},videoChange:function(t){e.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setPlaybackVideoPropertiesFromEvent(t)},audioChange:function(t){e.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.sample.audioBitrate=t.bitrate},pause:function(t,a,s){e.setDuration(t),e.setState(a),e.sample.paused=t,e.sendAnalyticsRequestAndClearValues()},paused_seeking:function(t,a,s){e.setDuration(t),e.setState(a),e.sample.seeked=t,e.sendAnalyticsRequestAndClearValues()},play_seeking:this.utils.noOp,end_play_seeking:function(t,a,s){e.setState(a),e.setDuration(t),e.sample.seeked=t,e.sendAnalyticsRequestAndClearValues()},rebuffering:function(t,a,s){e.setDuration(t),e.setState(a),e.sample.buffered=t,e.sendAnalyticsRequestAndClearValues()},error:function(t){e.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setState("error"),e.sample.errorCode=t.code,e.sample.errorMessage=t.message,e.sendAnalyticsRequestAndClearValues(),delete e.sample.errorCode,delete e.sample.errorMessage},end:function(t,a,s){e.sample.impressionId=e.utils.generateUUID()},ad:function(t,a,s){e.setDuration(t),e.setState(a),e.sample.ad=t,e.setDroppedFrames(s),e.sendAnalyticsRequestAndClearValues()},mute:function(){e.sample.isMuted=!0},unMute:function(){e.sample.isMuted=!1},muting_ready:this.utils.noOp,muting_play:this.utils.noOp,muting_pause:this.utils.noOp,setVideoTimeEndFromEvent:function(t){e.utils.validNumber(t.currentTime)&&(e.sample.videoTimeEnd=e.utils.calculateTime(t.currentTime))},setVideoTimeStartFromEvent:function(t){e.utils.validNumber(t.currentTime)&&(e.sample.videoTimeStart=e.utils.calculateTime(t.currentTime))},startCasting:function(a,s){if(s&&s.resuming)return e.isAllowedToSendSamples=!1,void m.default.warning("Player started casting but a session is already casting!");e.isCastClient=!0,e.isAllowedToSendSamples=!1;var i=e.sample,n=i.domain,r=i.path,o=i.language,l=i.userAgent,E=i.userId,u=i.impressionId,S={type:t.CAST_RECEIVER_CONFIG_MESSAGE,data:{config:e.config,userId:E,domain:n,path:r,language:o,userAgent:l,impressionId:u}};e.castClient.setUp(),e.castClient.sendMessage(S)},casting:function(){e.isCastClient=!1,e.samplesQueue=[],e.isAllowedToSendSamples=!0}}}},{key:"setDuration",value:function(t){this.sample.duration=t}},{key:"setState",value:function(t){this.sample.state=t}},{key:"setPlaybackVideoPropertiesFromEvent",value:function(t){this.utils.validNumber(t.width)&&(this.sample.videoPlaybackWidth=t.width),this.utils.validNumber(t.height)&&(this.sample.videoPlaybackHeight=t.height),this.utils.validNumber(t.bitrate)&&(this.sample.videoBitrate=t.bitrate)}},{key:"setPlaybackSettingsFromLoadedEvent",value:function(t){this.utils.validBoolean(t.isLive)&&(this.sample.isLive=t.isLive),this.utils.validString(t.version)&&(this.sample.version=this.sample.player+"-"+t.version),this.utils.validString(t.type)&&(this.sample.playerTech=t.type),this.utils.validNumber(t.duration)&&(this.sample.videoDuration=this.utils.calculateTime(t.duration)),this.utils.validString(t.streamType)&&(this.sample.streamFormat=t.streamType),this.utils.validString(t.mpdUrl)&&(this.sample.mpdUrl=t.mpdUrl),this.utils.validString(t.m3u8Url)&&(this.sample.m3u8Url=t.m3u8Url),this.utils.validString(t.progUrl)&&(this.sample.progUrl=t.progUrl),this.utils.validNumber(t.videoWindowWidth)&&(this.sample.videoWindowWidth=t.videoWindowWidth),this.utils.validNumber(t.videoWindowHeight)&&(this.sample.videoWindowHeight=t.videoWindowHeight),this.utils.validBoolean(t.isMuted)&&(this.sample.isMuted=t.isMuted),this.utils.validBoolean(t.autoplay)&&(this.autoplay=t.autoplay),"progressive"===this.sample.streamFormat&&(this.sample.videoBitrate=t.progBitrate)}},{key:"setupSample",value:function(){this.sample={domain:this.utils.sanitizePath(window.location.hostname),path:this.utils.sanitizePath(window.location.pathname),language:navigator.language||navigator.userLanguage,userAgent:navigator.userAgent,screenWidth:screen.width,screenHeight:screen.height,isLive:!1,isCasting:this.isCastReceiver,videoDuration:0,size:"WINDOW",time:0,videoWindowWidth:0,videoWindowHeight:0,droppedFrames:0,played:0,buffered:0,paused:0,ad:0,seeked:0,videoPlaybackWidth:0,videoPlaybackHeight:0,videoBitrate:0,audioBitrate:0,videoTimeStart:0,videoTimeEnd:0,videoStartupTime:0,duration:0,startupTime:0,analyticsVersion:"1.4.4"}}},{key:"checkLicensing",value:function(t){this.licenseCall.sendRequest(t,this.sample.domain,this.sample.analyticsVersion,this.handleLicensingResponse.bind(this))}},{key:"handleLicensingResponse",value:function(t){"granted"===t.status?this.licensing="granted":(this.licensing="denied",m.default.log("Analytics license denied, reason: "+t.message))}},{key:"sendAnalyticsRequest",value:function(){var e=this;if("denied"!==this.licensing)if("granted"===this.licensing){if(this.sample.time=this.utils.getCurrentTimestamp(),!this.isCastClient&&!this.isCastReceiver)return void this.analyticsCall.sendRequest(this.sample,this.utils.noOp);if(this.isAllowedToSendSamples){for(var a=0;a<this.samplesQueue.length;a++)this.analyticsCall.sendRequest(this.samplesQueue[a],this.utils.noOp);this.samplesQueue=[],this.analyticsCall.sendRequest(this.sample,this.utils.noOp)}else{var s=n({},this.sample);this.samplesQueue.push(s)}}else"waiting"===this.licensing&&!function(){e.sample.time=e.utils.getCurrentTimestamp(),m.default.log("Licensing callback still pending, waiting...");var a=n({},e.sample);window.setTimeout(function(){e.analyticsCall.sendRequest(a,e.utils.noOp)},t.LICENSE_CALL_PENDING_TIMEOUT)}()}},{key:"sendAnalyticsRequestAndClearValues",value:function(){this.sendAnalyticsRequest(),this.clearValues()}},{key:"sendUnloadRequest",value:function(){if("denied"!==this.licensing)if("undefined"==typeof navigator.sendBeacon)this.sendAnalyticsRequestSynchronous();else{var t=navigator.sendBeacon(this.analyticsCall.getAnalyticsServerUrl(),JSON.stringify(this.sample));t||this.sendAnalyticsRequestSynchronous()}}},{key:"sendAnalyticsRequestSynchronous",value:function(){"denied"!==this.licensing&&this.analyticsCall.sendRequestSynchronous(this.sample,this.utils.noOp)}},{key:"clearValues",value:function(){this.sample.ad=0,this.sample.paused=0,this.sample.played=0,this.sample.seeked=0,this.sample.buffered=0,this.sample.playerStartupTime=0,this.sample.videoStartupTime=0,this.sample.startupTime=0,this.sample.duration=0,this.sample.droppedFrames=0,this.sample.pageLoadType=0}},{key:"getDroppedFrames",value:function(t){if(void 0!=t&&0!=t){var e=t-this.droppedSampleFrames;return this.droppedSampleFrames=t,e}return 0}}]),t}();U.PAGE_LOAD_TYPE={FOREGROUND:1,BACKGROUND:2},U.LICENSE_CALL_PENDING_TIMEOUT=200,U.PAGE_LOAD_TYPE_TIMEOUT=200,U.CAST_RECEIVER_CONFIG_MESSAGE="CAST_RECEIVER_CONFIG_MESSAGE",e.default=U},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(3),l=s(o),E=a(4),u=function(t){function e(){var t,a,s,r;i(this,e);for(var o=arguments.length,l=Array(o),E=0;E<o;E++)l[E]=arguments[E];return a=s=n(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),s.sendRequest=function(t,a,s,i){var n={key:t,domain:a,analyticsVersion:s};this.post(e.licenseServerUrl,n,i)},r=a,n(s,r)}return r(e,t),e}(l.default);u.licenseServerUrl=E.ANALYTICS_BACKEND_BASE_URL+"/licensing",e.default=u},function(t,e){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(){function t(){a(this,t)}return s(t,[{key:"post",value:function(t,e,a){var s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=void 0,n=!1;window.XDomainRequest&&(n=!0),i=n?new window.XDomainRequest:new XMLHttpRequest;var r=function(){if(i.readyState==XMLHttpRequest.DONE){if(i.responseText<=0)return;var t=JSON.parse(i.responseText);a(t)}};n?i.onload=r:i.onreadystatechange=r,i.open("POST",t,s),n||i.setRequestHeader("Content-Type","text/plain"),i.send(JSON.stringify(e))}}]),t}();e.default=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.MESSAGE_NAMESPACE="urn:x-cast:com.bitmovin.analytics.cast",e.ANALYTICS_BACKEND_BASE_URL="https://analytics-ingress-beta.bitmovin.com"},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(3),l=s(o),E=a(4),u=function(t){function e(){var t,a,s,r;i(this,e);for(var o=arguments.length,l=Array(o),E=0;E<o;E++)l[E]=arguments[E];return a=s=n(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),s.sendRequest=function(t,a){this.post(e.analyticsServerUrl,t,a)},s.sendRequestSynchronous=function(t,a){this.post(e.analyticsServerUrl,t,a,!1)},s.getAnalyticsServerUrl=function(){return e.analyticsServerUrl},r=a,n(s,r)}return r(e,t),e}(l.default);u.analyticsServerUrl=E.ANALYTICS_BACKEND_BASE_URL+"/analytics",e.default=u},function(t,e){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function t(){a(this,t),this.validString=function(t){return void 0!=t&&"string"==typeof t},this.validBoolean=function(t){return void 0!=t&&"boolean"==typeof t},this.validNumber=function(t){return void 0!=t&&"number"==typeof t},this.sanitizePath=function(t){return t.replace(/\/$/g,"")},this.calculateTime=function(t){return t*=1e3,Math.round(t)},this.getCurrentTimestamp=function(){return(new Date).getTime()},this.getDurationFromTimestampToNow=function(t){return this.getCurrentTimestamp()-t},this.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,a="x"==t?e:3&e|8;return a.toString(16)})},this.getCookie=function(t){for(var e=t+"=",a=document.cookie.split(";"),s=0;s<a.length;s++){for(var i=a[s];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""},this.noOp=function(){},this.times=function(t,e){var a=this,s=0,i=void 0;return function(){return s>=e?i:(i=t.apply(a,arguments),s++,i)}},this.once=function(t){return times(t,1)},this.getHiddenProp=function(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null},this.getCustomDataString=function(t){return"object"===("undefined"==typeof t?"undefined":s(t))?JSON.stringify(t):"function"==typeof t?getCustomDataString(t()):"undefined"==typeof t?t:"string"!=typeof t?String(t):t}};e.default=i},function(t,e){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a(this,t),this.log=function(t){this.showLogs&&console.log(t)},this.error=function(t){this.showLogs&&console.error(t)},this.warning=function(t){this.showLogs&&console.warn(t)},this.showLogs=e}return s(t,[{key:"setLogging",value:function(t){this.showLogs=t}},{key:"isLogging",value:function(){return this.showLogs}}]),t}(),n=new i;e.default=n},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),r=a(9),o=s(r),l=a(10),E=s(l),u=a(12),S=s(u),f=a(13),d=s(f),m=function(){function t(){i(this,t),this.playerDetector=new o.default}return n(t,[{key:"getAdapter",value:function(t,e,a){return this.playerDetector.isBitmovinVersionPre7(t)?new E.default(t,e):this.playerDetector.isBitmovinVersion7Plus(t)?new S.default(t,e):this.playerDetector.isVideoJs(t)?new d.default(t,e,a):void 0}}]),t}();e.default=m},function(t,e){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function t(){a(this,t),this.isBitmovinVersionPre7=function(t){return"function"==typeof t.getVersion&&t.getVersion()<"7"},this.isBitmovinVersion7Plus=function(t){return"string"==typeof t.version&&t.version>="7"},this.isVideoJs=function(t){return"function"==typeof videojs&&videojs(t.id_)===t}};e.default=s},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),r=a(11),o=s(r),l=function(){function t(e,a){i(this,t),this.onBeforeUnLoadEvent=!1,this.player=e,this.eventCallback=a,this.register()}return n(t,[{key:"register",value:function(){var t=this;this.player.addEventHandler(bitmovin.player.EVENT.ON_SOURCE_LOADED,function(){t.eventCallback(o.default.SOURCE_LOADED)}),this.player.addEventHandler(bitmovin.player.EVENT.ON_READY,function(){var e=!1;t.player.getConfig().playback&&t.player.getConfig().playback.autoplay&&(e=t.player.getConfig().playback.autoplay),t.eventCallback(o.default.READY,{isLive:t.player.isLive(),version:t.player.getVersion(),type:t.player.getPlayerType(),duration:t.player.getDuration(),streamType:t.player.getStreamType(),videoId:t.player.getConfig().source.videoId,userId:t.player.getConfig().source.userId,mpdUrl:t.player.getConfig().source.dash,m3u8Url:t.player.getConfig().source.hls,progUrl:t.player.getConfig().source.progressive,videoWindowWidth:t.player.getFigure().offsetWidth,videoWindowHeight:t.player.getFigure().offsetHeight,isMuted:t.player.isMuted(),autoplay:e})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_CAST_START,function(){t.eventCallback(o.default.START_CAST)}),this.player.addEventHandler(bitmovin.player.EVENT.ON_CAST_STOP,function(){t.eventCallback(o.default.END_CAST)}),this.player.addEventHandler(bitmovin.player.EVENT.ON_PLAY,function(){t.eventCallback(o.default.PLAY,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_PAUSE,function(){t.eventCallback(o.default.PAUSE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_TIME_CHANGED,function(){t.eventCallback(o.default.TIMECHANGED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_SEEK,function(){t.eventCallback(o.default.SEEK,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_SEEKED,function(){t.eventCallback(o.default.SEEKED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_START_BUFFERING,function(){t.eventCallback(o.default.START_BUFFERING)}),this.player.addEventHandler(bitmovin.player.EVENT.ON_STOP_BUFFERING,function(){t.eventCallback(o.default.END_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_AUDIO_PLAYBACK_QUALITY_CHANGE,function(){var e=t.player.getPlaybackAudioData();t.eventCallback(o.default.AUDIO_CHANGE,{bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_VIDEO_PLAYBACK_QUALITY_CHANGE,function(){var e=t.player.getPlaybackVideoData();t.eventCallback(o.default.VIDEO_CHANGE,{width:e.width,height:e.height,bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_FULLSCREEN_ENTER,function(){t.eventCallback(o.default.START_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.onBeforeUnLoadEvent=!1,this.player.addEventHandler(bitmovin.player.EVENT.ON_FULLSCREEN_EXIT,function(){t.eventCallback(o.default.END_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_AD_STARTED,function(){t.eventCallback(o.default.START_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_AD_FINISHED,function(){t.eventCallback(o.default.END_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_MUTE,function(){t.eventCallback(o.default.MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_UNMUTE,function(){t.eventCallback(o.default.UN_MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_ERROR,function(e){t.eventCallback(o.default.ERROR,{code:e.code,message:e.message})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_PLAYBACK_FINISHED,function(){t.eventCallback(o.default.PLAYBACK_FINISHED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),window.onunload=window.onbeforeunload=function(){t.onBeforeUnLoadEvent||(t.onBeforeUnLoadEvent=!0,t.eventCallback(o.default.UNLOAD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()}))}}}]),t}();e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={READY:"ready",SOURCE_LOADED:"sourceLoaded",PLAY:"play",PAUSE:"pause",TIMECHANGED:"timechanged",SEEK:"seek",SEEKED:"seeked",START_CAST:"startCasting",END_CAST:"endCasting",START_BUFFERING:"startBuffering",END_BUFFERING:"endBuffering",AUDIO_CHANGE:"audioChange",VIDEO_CHANGE:"videoChange",START_FULLSCREEN:"startFullscreen",END_FULLSCREEN:"endFullscreen",START_AD:"adStart",END_AD:"adEnd",MUTE:"mute",UN_MUTE:"unMute",ERROR:"playerError",PLAYBACK_FINISHED:"end",SCREEN_RESIZE:"resize",UNLOAD:"unload",END:"end"};e.default=a},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=a(11),l=s(o),E=function(){function t(e,a){i(this,t),this.onBeforeUnLoadEvent=!1,this.player=e,this.eventCallback=a,this.register()}return r(t,[{key:"register",value:function(){var t=this,e=function(e){if(!e)return{progUrl:void 0,progBitrate:void 0};if("string"==typeof e)return{progUrl:e,progBitrate:0};if(Array.isArray(e)){var a=t.player.getPlaybackVideoData(),s=parseInt(a.id)||0;return{progUrl:e[s].url,progBitrate:e[s].bitrate||0}}return"object"===("undefined"==typeof e?"undefined":n(e))?{progUrl:e.url,progBitrate:e.bitrate||0}:void 0};this.player.addEventHandler(bitmovin.player.EVENT.ON_SOURCE_LOADED,function(a){var s=!1;t.player.getConfig().playback&&t.player.getConfig().playback.autoplay&&(s=t.player.getConfig().playback.autoplay);var i=t.player.getConfig(),n={},r=e(i.source.progressive);i.source&&(n={mpdUrl:i.source.dash,m3u8Url:i.source.hls,progUrl:r.progUrl,progBitrate:r.progBitrate}),t.eventCallback(l.default.SOURCE_LOADED,{isLive:t.player.isLive(),version:t.player.version,type:t.player.getPlayerType(),duration:t.player.getDuration(),streamType:t.player.getStreamType(),mpdUrl:n.mpdUrl,m3u8Url:n.m3u8Url,progUrl:n.progUrl,progBitrate:n.progBitrate,videoWindowWidth:t.player.getFigure().offsetWidth,videoWindowHeight:t.player.getFigure().offsetHeight,isMuted:t.player.isMuted(),autoplay:s})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_READY,function(){var a=!1;t.player.getConfig().playback&&t.player.getConfig().playback.autoplay&&(a=t.player.getConfig().playback.autoplay);var s=t.player.getConfig(),i={},n=e(s.source.progressive);s.source&&(i={videoId:s.source.videoId,userId:s.source.userId,mpdUrl:s.source.dash,m3u8Url:s.source.hls,progUrl:n.progUrl,progBitrate:n.progBitrate}),t.eventCallback(l.default.READY,{isLive:t.player.isLive(),version:t.player.version,type:t.player.getPlayerType(),duration:t.player.getDuration(),streamType:t.player.getStreamType(),videoId:i.videoId,userId:i.userId,mpdUrl:i.mpdUrl,m3u8Url:i.m3u8Url,progUrl:i.progUrl,progBitrate:i.progBitrate,videoWindowWidth:t.player.getFigure().offsetWidth,videoWindowHeight:t.player.getFigure().offsetHeight,isMuted:t.player.isMuted(),autoplay:a})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_CAST_STARTED,function(e){t.eventCallback(l.default.START_CAST,e)}),this.player.addEventHandler(bitmovin.player.EVENT.ON_CAST_STOPPED,function(){t.eventCallback(l.default.END_CAST,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_PLAY,function(){t.eventCallback(l.default.PLAY,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_PAUSED,function(){t.eventCallback(l.default.PAUSE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_TIME_CHANGED,function(){t.eventCallback(l.default.TIMECHANGED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_SEEK,function(){t.eventCallback(l.default.SEEK,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_SEEKED,function(){t.eventCallback(l.default.SEEKED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_STALL_STARTED,function(){t.eventCallback(l.default.START_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_STALL_ENDED,function(){
t.eventCallback(l.default.END_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_AUDIO_PLAYBACK_QUALITY_CHANGED,function(){var e=t.player.getPlaybackAudioData();t.eventCallback(l.default.AUDIO_CHANGE,{bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_VIDEO_PLAYBACK_QUALITY_CHANGED,function(){var e=t.player.getPlaybackVideoData();t.eventCallback(l.default.VIDEO_CHANGE,{width:e.width,height:e.height,bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_FULLSCREEN_ENTER,function(){t.eventCallback(l.default.START_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_FULLSCREEN_EXIT,function(){t.eventCallback(l.default.END_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_AD_STARTED,function(){t.eventCallback(l.default.START_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_AD_FINISHED,function(){t.eventCallback(l.default.END_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_MUTED,function(){t.eventCallback(l.default.MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_UNMUTED,function(){t.eventCallback(l.default.UN_MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_ERROR,function(e){t.eventCallback(l.default.ERROR,{code:e.code,message:e.message,currentTime:t.player.getCurrentTime()})}),this.player.addEventHandler(bitmovin.player.EVENT.ON_PLAYBACK_FINISHED,function(){t.eventCallback(l.default.PLAYBACK_FINISHED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})}),window.onunload=window.onbeforeunload=function(){t.onBeforeUnLoadEvent||(t.onBeforeUnLoadEvent=!0,t.eventCallback(l.default.UNLOAD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()}))}}}]),t}();e.default=E},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=a(11),l=s(o),E=1e3,u=function(){function t(e,a,s){i(this,t),this.onBeforeUnLoadEvent=!1,this.player=e,this.eventCallback=a,this.stateMachine=s,this.register()}return r(t,[{key:"getStreamType",value:function(t){return t.endsWith(".m3u8")?"hls":t.endsWith(".mpd")?"dash":"progressive"}},{key:"getStreamSources",value:function(t){var e=null,a=null,s=null,i=this.getStreamType(t);switch(i){case"hls":a=t;break;case"dash":e=t;break;default:s=t}return{mpdUrl:e,m3u8Url:a,progUrl:s}}},{key:"getVideoWindowDimensions",value:function(t){return{width:t.width(),height:t.height()}}},{key:"getVideoSourceDimensions",value:function(t){return{videoWidth:t.videoWidth(),videoHeight:t.videoHeight()}}},{key:"register",value:function(){var t=this,e=this;this.player.on("loadedmetadata",function(){var t=this.tech({IWillNotUseThisInPlugins:!0}),a=e.getStreamType(this.currentSrc()),s=e.getStreamSources(this.currentSrc()),i=n({isLive:!1,version:videojs.VERSION,type:"html5"===t.sourceHandler_.options_.mode?"html5":"native",duration:this.duration(),streamType:a,autoplay:this.autoplay()},s,e.getVideoWindowDimensions(this),{videoWindowWidth:this.videoWidth(),videoWindowHeight:this.videoHeight(),muted:this.muted()});e.eventCallback(l.default.READY,i)}),this.player.ready(function(){}),this.player.on("play",function(){e.eventCallback(l.default.PLAY,{currentTime:this.currentTime()})}),this.player.on("pause",function(){console.log("pause"),e.eventCallback(l.default.PAUSE,{currentTime:this.currentTime()})}),this.player.on("error",function(){var t=this.error();e.eventCallback(l.default.ERROR,{currentTime:this.currentTime(),code:t.code,message:t.message})}),this.player.on("volumechange",function(){var t=this.muted();t?e.eventCallback(l.default.MUTE,{currentTime:this.currentTime()}):e.eventCallback(l.default.UN_MUTE,{currentTime:this.currentTime()})}),this.player.on("seeking",function(){e.eventCallback(l.default.SEEK,{currentTime:this.currentTime(),droppedFrames:0})}),this.player.on("seeked",function(){e.eventCallback(l.default.SEEKED,{currentTime:this.currentTime(),droppedFrames:0})});var a=-1,s=void 0,i=Date.now(),r=!1;this.player.on("timeupdate",function(){var t=this;clearTimeout(s),r=!1,i=Date.now(),e.eventCallback(l.default.TIMECHANGED,{currentTime:this.currentTime()});var n=this.tech_.hls.playlists.media();if(n){var o=n.attributes,u=o.BANDWIDTH,S=o.RESOLUTION.width,f=o.RESOLUTION.height;if(a!==u){var d={width:S,height:f,bitrate:u,currentTime:this.currentTime()};e.eventCallback(l.default.VIDEO_CHANGE,d),a=u}s=window.setTimeout(function(){(!t.paused()&&!t.ended()||r)&&e.eventCallback(l.default.START_BUFFERING,{currentTime:t.currentTime()})},E)}}),this.player.on("stalled",function(){r=!0}),window.onunload=window.onbeforeunload=function(){t.onBeforeUnLoadEvent||(t.onBeforeUnLoadEvent=!0,t.eventCallback(l.default.UNLOAD,{currentTime:t.player.currentTime()}))}}}]),t}();e.default=u},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),r=a(9),o=s(r),l=a(15),E=s(l),u=a(17),S=s(u),f=a(18),d=s(f),m=function(){function t(){i(this,t),this.playerDetector=new o.default}return n(t,[{key:"getAnalyticsStateMachine",value:function(t,e){return this.playerDetector.isBitmovinVersionPre7(t)?new E.default(e):this.playerDetector.isBitmovinVersion7Plus(t)?new S.default(e):this.playerDetector.isVideoJs(t)?new d.default(e):void 0}}]),t}();e.default=m},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),r=a(7),o=s(r),l=a(16),E=s(l),u=a(11),S=s(u),f=function(){function t(e){i(this,t),this.stateMachineCallbacks=e,this.pausedTimestamp=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.onEnterStateTimestamp=0,this.States={SETUP:"SETUP",STARTUP:"STARTUP",READY:"READY",PLAYING:"PLAYING",REBUFFERING:"REBUFFERING",PAUSE:"PAUSE",QUALITYCHANGE:"QUALITYCHANGE",PAUSED_SEEKING:"PAUSED_SEEKING",PLAY_SEEKING:"PLAY_SEEKING",END_PLAY_SEEKING:"END_PLAY_SEEKING",QUALITYCHANGE_PAUSE:"QUALITYCHANGE_PAUSE",END:"END",ERROR:"ERROR",AD:"AD",MUTING_READY:"MUTING_READY",MUTING_PLAY:"MUTING_PLAY",MUTING_PAUSE:"MUTING_PAUSE"},this.createStateMachine()}return n(t,[{key:"createStateMachine",value:function(){var e=this;this.stateMachine=E.default.create({initial:this.States.SETUP,error:function(t,e,a,s,i,n,r){o.default.error(n)},events:[{name:S.default.READY,from:[this.States.SETUP,this.States.ERROR],to:this.States.READY},{name:S.default.PLAY,from:this.States.READY,to:this.States.STARTUP},{name:S.default.START_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:S.default.END_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:S.default.TIMECHANGED,from:this.States.STARTUP,to:this.States.PLAYING},{name:S.default.TIMECHANGED,from:this.States.PLAYING,to:this.States.PLAYING},{name:S.default.END_BUFFERING,from:this.States.PLAYING,to:this.States.PLAYING},{name:S.default.START_BUFFERING,from:this.States.PLAYING,to:this.States.REBUFFERING},{name:S.default.END_BUFFERING,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:S.default.TIMECHANGED,from:this.States.REBUFFERING,to:this.States.REBUFFERING},{name:S.default.PAUSE,from:this.States.PLAYING,to:this.States.PAUSE},{name:S.default.PAUSE,from:this.States.REBUFFERING,to:this.States.PAUSE},{name:S.default.PLAY,from:this.States.PAUSE,to:this.States.PLAYING},{name:S.default.VIDEO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:S.default.AUDIO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:S.default.VIDEO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:S.default.AUDIO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.States.QUALITYCHANGE,to:this.States.PLAYING},{name:S.default.VIDEO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:S.default.AUDIO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:S.default.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:S.default.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.States.QUALITYCHANGE_PAUSE,to:this.States.PAUSE},{name:S.default.SEEK,from:this.States.PAUSE,to:this.States.PAUSED_SEEKING},{name:S.default.SEEK,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:S.default.AUDIO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:S.default.VIDEO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:S.default.START_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:S.default.END_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:S.default.SEEKED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:S.default.PLAY,from:this.States.PAUSED_SEEKING,to:this.States.PLAYING},{name:S.default.PAUSE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:"PLAY_SEEK",from:this.States.PAUSE,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PAUSED_SEEKING,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:S.default.SEEK,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:S.default.AUDIO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:S.default.VIDEO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:S.default.START_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:S.default.END_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:S.default.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:S.default.PLAY,from:this.States.PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:S.default.START_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:S.default.END_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:S.default.SEEKED,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:S.default.TIMECHANGED,from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:S.default.END,from:this.States.PLAY_SEEKING,to:this.States.END},{name:S.default.END,from:this.States.PAUSED_SEEKING,to:this.States.END},{name:S.default.END,from:this.States.PLAYING,to:this.States.END},{name:S.default.END,from:this.States.PAUSE,to:this.States.END},{name:S.default.SEEK,from:this.States.END,to:this.States.END},{name:S.default.SEEKED,from:this.States.END,to:this.States.END},{name:S.default.TIMECHANGED,from:this.States.END,to:this.States.END},{name:S.default.END_BUFFERING,from:this.States.END,to:this.States.END},{name:S.default.START_BUFFERING,from:this.States.END,to:this.States.END},{name:S.default.END,from:this.States.END,to:this.States.END},{name:S.default.PLAY,from:this.States.END,to:this.States.PLAYING},{name:S.default.ERROR,from:[this.States.SETUP,this.States.STARTUP,this.States.READY,this.States.PLAYING,this.States.REBUFFERING,this.States.PAUSE,this.States.QUALITYCHANGE,this.States.PAUSED_SEEKING,this.States.PLAY_SEEKING,this.States.END_PLAY_SEEKING,this.States.QUALITYCHANGE_PAUSE,"FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE",this.States.END,this.States.ERROR],to:this.States.ERROR},{name:S.default.SEEK,from:this.States.END_PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:S.default.UNLOAD,from:[this.States.PLAYING,this.States.PAUSE],to:this.States.END},{name:S.default.START_AD,from:this.States.PLAYING,to:this.States.AD},{name:S.default.END_AD,from:this.States.AD,to:this.States.PLAYING},{name:S.default.MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:S.default.UN_MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:"FINISH_MUTING",from:this.States.MUTING_READY,to:this.States.READY},{name:S.default.MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:S.default.UN_MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:"FINISH_MUTING",from:this.States.MUTING_PLAY,to:this.States.PLAYING},{name:S.default.MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:S.default.UN_MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.States.MUTING_PAUSE,to:this.States.PAUSE}],callbacks:{onpause:function(t,a,s,i){a===e.States.PLAYING&&(e.pausedTimestamp=i)},onbeforeevent:function(a,s,i,n,r){return a===S.default.SEEK&&s===e.States.PAUSE&&n-e.pausedTimestamp<t.PAUSE_SEEK_DELAY?(e.stateMachine.PLAY_SEEK(n),!1):(a===S.default.SEEK&&window.clearTimeout(e.seekedTimeout),a===S.default.SEEKED&&s===e.States.PAUSED_SEEKING?(e.seekedTimestamp=n,e.seekedTimeout=window.setTimeout(function(){e.stateMachine.pause(n,r)},t.SEEKED_PAUSE_DELAY),!1):void 0)},onafterevent:function(a,s,i,n){o.default.log(t.pad(n,20)+"EVENT: "+t.pad(a,20)+" from "+t.pad(s,14)+"-> "+t.pad(i,14)),i===e.States.QUALITYCHANGE_PAUSE&&e.stateMachine.FINISH_QUALITYCHANGE_PAUSE(n),i===e.States.QUALITYCHANGE&&e.stateMachine.FINISH_QUALITYCHANGE(n),i!==e.States.MUTING_READY&&i!==e.States.MUTING_PLAY&&i!==e.States.MUTING_PAUSE||e.stateMachine.FINISH_MUTING(n)},onenterstate:function(t,a,s,i,n){e.onEnterStateTimestamp=i||(new Date).getTime(),o.default.log("Entering State "+s+" with "+t),n&&s!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(n)},onleavestate:function(t,a,s,i,n){if(i){var r=i-e.onEnterStateTimestamp;o.default.log("State "+a+" was "+r+" ms event:"+t),n&&s!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeEndFromEvent(n);var l=a.toLowerCase();if(a===e.States.END_PLAY_SEEKING||a===e.States.PAUSED_SEEKING){var E=e.seekedTimestamp-e.seekTimestamp;e.stateMachineCallbacks[l](E,l,n),o.default.log("Seek was "+E+"ms")}else if(t===S.default.UNLOAD&&a===e.States.PLAYING)e.stateMachineCallbacks.playingAndBye(r,l,n);else if(a===e.States.PAUSE&&s!==e.States.PAUSED_SEEKING)e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.stateMachineCallbacks.pause(r,l,n);else{var u=e.stateMachineCallbacks[l];"function"==typeof u?u(r,l,n):o.default.error("Could not find callback function for "+l)}n&&s!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(n),t===S.default.VIDEO_CHANGE?e.stateMachineCallbacks.videoChange(n):t===S.default.AUDIO_CHANGE?e.stateMachineCallbacks.audioChange(n):t===S.default.MUTE?(o.default.log("Setting sample to muted"),e.stateMachineCallbacks.mute()):t===S.default.UN_MUTE&&(o.default.log("Setting sample to unmuted"),e.stateMachineCallbacks.unMute())}},onseek:function(t,a,s,i){e.seekTimestamp=i},onseeked:function(t,a,s,i){e.seekedTimestamp=i},ontimechanged:function(t,a,s,i,n){var r=i-e.onEnterStateTimestamp;r>59700&&(e.stateMachineCallbacks.setVideoTimeEndFromEvent(n),o.default.log("Sending heartbeat"),e.stateMachineCallbacks.heartbeat(r,a.toLowerCase(),n),e.onEnterStateTimestamp=i,e.stateMachineCallbacks.setVideoTimeStartFromEvent(n))},onplayerError:function(t,a,s,i,n){e.stateMachineCallbacks.error(n)}}})}},{key:"callEvent",value:function(t,e,a){var s=this.stateMachine[t];s?s.call(this.stateMachine,a,e):o.default.log("Ignored Event: "+t)}}],[{key:"pad",value:function(t,e){var a=new Array(e).join(" ");return(t+a).slice(0,e)}}]),t}();f.PAUSE_SEEK_DELAY=60,f.SEEKED_PAUSE_DELAY=120,e.default=f},function(t,e,a){!function(){var a={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,e){var s="string"==typeof t.initial?{state:t.initial}:t.initial,i=t.terminal||t.final,n=e||t.target||{},r=t.events||[],o=t.callbacks||{},l={},E={},u=function(t){var e=Array.isArray(t.from)?t.from:t.from?[t.from]:[a.WILDCARD];l[t.name]=l[t.name]||{};for(var s=0;s<e.length;s++)E[e[s]]=E[e[s]]||[],E[e[s]].push(t.name),l[t.name][e[s]]=t.to||e[s];t.to&&(E[t.to]=E[t.to]||[])};s&&(s.event=s.event||"startup",u({name:s.event,from:"none",to:s.state}));for(var S=0;S<r.length;S++)u(r[S]);for(var f in l)l.hasOwnProperty(f)&&(n[f]=a.buildEvent(f,l[f]));for(var f in o)o.hasOwnProperty(f)&&(n[f]=o[f]);return n.current="none",n.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},n.can=function(t){return!this.transition&&void 0!==l[t]&&(l[t].hasOwnProperty(this.current)||l[t].hasOwnProperty(a.WILDCARD))},n.cannot=function(t){return!this.can(t)},n.transitions=function(){return(E[this.current]||[]).concat(E[a.WILDCARD]||[])},n.isFinished=function(){return this.is(i)},n.error=t.error||function(t,e,a,s,i,n,r){throw r||n},n.states=function(){return Object.keys(E).sort()},s&&!s.defer&&n[s.event](),n},doCallback:function(t,e,s,i,n,r){if(e)try{return e.apply(t,[s,i,n].concat(r))}catch(e){return t.error(s,i,n,r,a.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}},beforeAnyEvent:function(t,e,s,i,n){return a.doCallback(t,t.onbeforeevent,e,s,i,n)},afterAnyEvent:function(t,e,s,i,n){return a.doCallback(t,t.onafterevent||t.onevent,e,s,i,n)},leaveAnyState:function(t,e,s,i,n){return a.doCallback(t,t.onleavestate,e,s,i,n)},enterAnyState:function(t,e,s,i,n){return a.doCallback(t,t.onenterstate||t.onstate,e,s,i,n)},changeState:function(t,e,s,i,n){return a.doCallback(t,t.onchangestate,e,s,i,n)},beforeThisEvent:function(t,e,s,i,n){return a.doCallback(t,t["onbefore"+e],e,s,i,n)},afterThisEvent:function(t,e,s,i,n){return a.doCallback(t,t["onafter"+e]||t["on"+e],e,s,i,n)},leaveThisState:function(t,e,s,i,n){return a.doCallback(t,t["onleave"+s],e,s,i,n)},enterThisState:function(t,e,s,i,n){return a.doCallback(t,t["onenter"+i]||t["on"+i],e,s,i,n)},beforeEvent:function(t,e,s,i,n){if(!1===a.beforeThisEvent(t,e,s,i,n)||!1===a.beforeAnyEvent(t,e,s,i,n))return!1},afterEvent:function(t,e,s,i,n){a.afterThisEvent(t,e,s,i,n),a.afterAnyEvent(t,e,s,i,n)},leaveState:function(t,e,s,i,n){var r=a.leaveThisState(t,e,s,i,n),o=a.leaveAnyState(t,e,s,i,n);return!1!==r&&!1!==o&&(a.ASYNC===r||a.ASYNC===o?a.ASYNC:void 0)},enterState:function(t,e,s,i,n){a.enterThisState(t,e,s,i,n),a.enterAnyState(t,e,s,i,n)},buildEvent:function(t,e){return function(){var s=this.current,i=e[s]||(e[a.WILDCARD]!=a.WILDCARD?e[a.WILDCARD]:s)||s,n=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,s,i,n,a.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,s,i,n,a.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===a.beforeEvent(this,t,s,i,n))return a.Result.CANCELLED;if(s===i)return a.afterEvent(this,t,s,i,n),a.Result.NOTRANSITION;var r=this;this.transition=function(){return r.transition=null,r.current=i,a.enterState(r,t,s,i,n),a.changeState(r,t,s,i,n),a.afterEvent(r,t,s,i,n),a.Result.SUCCEEDED},this.transition.cancel=function(){r.transition=null,a.afterEvent(r,t,s,i,n)};var o=a.leaveState(this,t,s,i,n);return!1===o?(this.transition=null,a.Result.CANCELLED):a.ASYNC===o?a.Result.PENDING:this.transition?this.transition():void 0}}};"undefined"!=typeof t&&t.exports&&(e=t.exports=a),e.StateMachine=a}()},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=a(7),l=s(o),E=a(16),u=s(E),S=a(11),f=s(S),d=function(){function t(e){n(this,t),this.stateMachineCallbacks=e,this.pausedTimestamp=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.onEnterStateTimestamp=0,this.States={SETUP:"SETUP",STARTUP:"STARTUP",READY:"READY",PLAYING:"PLAYING",REBUFFERING:"REBUFFERING",PAUSE:"PAUSE",QUALITYCHANGE:"QUALITYCHANGE",PAUSED_SEEKING:"PAUSED_SEEKING",PLAY_SEEKING:"PLAY_SEEKING",END_PLAY_SEEKING:"END_PLAY_SEEKING",QUALITYCHANGE_PAUSE:"QUALITYCHANGE_PAUSE",QUALITYCHANGE_REBUFFERING:"QUALITYCHANGE_REBUFFERING",END:"END",ERROR:"ERROR",AD:"AD",MUTING_READY:"MUTING_READY",MUTING_PLAY:"MUTING_PLAY",MUTING_PAUSE:"MUTING_PAUSE",CASTING:"CASTING"},this.createStateMachine()}return r(t,[{key:"getAllStates",value:function(){var t=this;return[].concat(i(Object.keys(this.States).map(function(e){return t.States[e]})),["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])}},{key:"createStateMachine",value:function(){var e=this;this.stateMachine=u.default.create({initial:this.States.SETUP,error:function(t,e,a,s,i,n){l.default.error("Error in statemachine: "+n)},events:[{name:f.default.READY,from:[this.States.SETUP,this.States.ERROR],to:this.States.READY},{name:f.default.PLAY,from:this.States.READY,to:this.States.STARTUP},{name:f.default.START_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:f.default.END_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:f.default.VIDEO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:f.default.AUDIO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:f.default.TIMECHANGED,from:this.States.STARTUP,to:this.States.PLAYING},{name:f.default.TIMECHANGED,from:this.States.PLAYING,to:this.States.PLAYING},{name:f.default.END_BUFFERING,from:this.States.PLAYING,to:this.States.PLAYING},{name:f.default.START_BUFFERING,from:this.States.PLAYING,to:this.States.REBUFFERING},{name:f.default.END_BUFFERING,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:f.default.TIMECHANGED,from:this.States.REBUFFERING,to:this.States.REBUFFERING},{name:f.default.PAUSE,from:this.States.PLAYING,to:this.States.PAUSE},{name:f.default.PAUSE,from:this.States.REBUFFERING,to:this.States.PAUSE},{name:f.default.PLAY,from:this.States.PAUSE,to:this.States.PLAYING},{name:f.default.VIDEO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:f.default.AUDIO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:f.default.VIDEO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:f.default.AUDIO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.States.QUALITYCHANGE,to:this.States.PLAYING},{name:f.default.VIDEO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:f.default.AUDIO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:f.default.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:f.default.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.States.QUALITYCHANGE_PAUSE,to:this.States.PAUSE},{name:f.default.SEEK,from:this.States.PAUSE,to:this.States.PAUSED_SEEKING},{name:f.default.SEEK,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:f.default.AUDIO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:f.default.VIDEO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:f.default.START_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:f.default.END_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:f.default.SEEKED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:f.default.PLAY,from:this.States.PAUSED_SEEKING,to:this.States.PLAYING},{name:f.default.PAUSE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:"PLAY_SEEK",from:this.States.PAUSE,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PAUSED_SEEKING,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.SEEK,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.AUDIO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.VIDEO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.START_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.END_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.PLAY,from:this.States.PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:f.default.START_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:f.default.END_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:f.default.SEEKED,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:f.default.TIMECHANGED,from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:f.default.END,from:this.States.PLAY_SEEKING,to:this.States.END},{name:f.default.END,from:this.States.PAUSED_SEEKING,to:this.States.END},{name:f.default.END,from:this.States.PLAYING,to:this.States.END},{name:f.default.END,from:this.States.PAUSE,to:this.States.END},{name:f.default.SEEK,from:this.States.END,to:this.States.END},{name:f.default.SEEKED,from:this.States.END,to:this.States.END},{name:f.default.TIMECHANGED,from:this.States.END,to:this.States.END},{name:f.default.END_BUFFERING,from:this.States.END,to:this.States.END},{name:f.default.START_BUFFERING,from:this.States.END,to:this.States.END},{name:f.default.END,from:this.States.END,to:this.States.END},{name:f.default.PLAY,from:this.States.END,to:this.States.PLAYING},{name:f.default.ERROR,from:this.getAllStates(),to:this.States.ERROR},{name:f.default.SEEK,from:this.States.END_PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:f.default.UNLOAD,from:this.getAllStates(),to:this.States.END},{name:f.default.START_AD,from:this.States.PLAYING,to:this.States.AD},{name:f.default.END_AD,from:this.States.AD,to:this.States.PLAYING},{name:f.default.MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:f.default.UN_MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:"FINISH_MUTING",from:this.States.MUTING_READY,to:this.States.READY},{name:f.default.MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:f.default.UN_MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:"FINISH_MUTING",from:this.States.MUTING_PLAY,to:this.States.PLAYING},{name:f.default.MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:f.default.UN_MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.States.MUTING_PAUSE,to:this.States.PAUSE},{name:f.default.START_CAST,from:[this.States.READY,this.States.PAUSE],to:this.States.CASTING},{name:f.default.PAUSE,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.PLAY,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.TIMECHANGED,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.MUTE,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.SEEK,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.SEEKED,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.END_CAST,from:this.States.CASTING,to:this.States.READY},{name:f.default.SEEK,from:this.States.READY,to:this.States.READY},{name:f.default.SEEKED,from:this.States.READY,to:this.States.READY},{name:f.default.SEEKED,from:this.States.STARTUP,to:this.States.STARTUP},{name:f.default.SOURCE_LOADED,from:this.getAllStates(),to:this.States.SETUP},{name:f.default.VIDEO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:f.default.AUDIO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:f.default.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:f.default.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.REBUFFERING}],callbacks:{onpause:function(t,a,s,i){a===e.States.PLAYING&&(e.pausedTimestamp=i)},onbeforeevent:function(a,s,i,n,r){return a===f.default.SEEK&&s===e.States.PAUSE&&(e.seekTimestamp=n,n-e.pausedTimestamp<t.PAUSE_SEEK_DELAY)?(e.stateMachine.PLAY_SEEK(n),!1):(a===f.default.SEEK&&window.clearTimeout(e.seekedTimeout),a===f.default.SEEKED&&s===e.States.PAUSED_SEEKING?(e.seekedTimestamp=n,e.seekedTimeout=window.setTimeout(function(){e.stateMachine.pause(n,r)},t.SEEKED_PAUSE_DELAY),!1):(s!==e.States.REBUFFERING||i!==e.States.QUALITYCHANGE_REBUFFERING)&&void 0)},onafterevent:function(a,s,i,n){l.default.log(t.pad(n,20)+"EVENT: "+t.pad(a,20)+" from "+t.pad(s,14)+"-> "+t.pad(i,14)),i===e.States.QUALITYCHANGE_PAUSE&&e.stateMachine.FINISH_QUALITYCHANGE_PAUSE(n),i===e.States.QUALITYCHANGE&&e.stateMachine.FINISH_QUALITYCHANGE(n),i===e.States.QUALITYCHANGE_REBUFFERING&&e.stateMachine.FINISH_QUALITYCHANGE_REBUFFERING(n),i!==e.States.MUTING_READY&&i!==e.States.MUTING_PLAY&&i!==e.States.MUTING_PAUSE||e.stateMachine.FINISH_MUTING(n)},onenterstate:function(t,a,s,i,n){e.onEnterStateTimestamp=i||(new Date).getTime(),l.default.log("Entering State "+s+" with "+t),n&&s!==e.States.PAUSED_SEEKING&&s!==e.States.PLAY_SEEKING&&s!==e.States.END_PLAY_SEEKING&&(l.default.log("Setting video time start to "+n.currentTime+", going to "+s),e.stateMachineCallbacks.setVideoTimeStartFromEvent(n)),"PLAY_SEEK"===t&&s===e.States.PLAY_SEEKING&&s!==e.States.PLAY_SEEKING&&s!==e.States.END_PLAY_SEEKING&&(e.seekTimestamp=e.onEnterStateTimestamp),t===f.default.START_CAST&&s===e.States.CASTING&&e.stateMachineCallbacks.startCasting(i,n)},onleavestate:function(t,a,s,i,n){if(i){var r=i-e.onEnterStateTimestamp;if(l.default.log("State "+a+" was "+r+" ms event:"+t),n&&s!==e.States.PAUSED_SEEKING&&s!==e.States.PLAY_SEEKING&&s!==e.States.END_PLAY_SEEKING&&(l.default.log("Setting video time end to "+n.currentTime+", going to "+s),
e.stateMachineCallbacks.setVideoTimeEndFromEvent(n)),"PLAY_SEEK"===t&&a===e.States.PAUSE)return!0;var o=a.toLowerCase();if(a===e.States.END_PLAY_SEEKING||a===e.States.PAUSED_SEEKING){var E=e.seekedTimestamp-e.seekTimestamp;e.stateMachineCallbacks[o](E,o,n),l.default.log("Seek was "+E+"ms")}else if(t===f.default.UNLOAD&&a===e.States.PLAYING)e.stateMachineCallbacks.playingAndBye(r,o,n);else if(a===e.States.PAUSE&&s!==e.States.PAUSED_SEEKING)e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.stateMachineCallbacks.pause(r,o,n);else{var u=e.stateMachineCallbacks[o];"function"==typeof u?u(r,o,n):l.default.error("Could not find callback function for "+o)}n&&s!==e.States.PAUSED_SEEKING&&s!==e.States.PLAY_SEEKING&&s!==e.States.END_PLAY_SEEKING&&(l.default.log("Setting video time start to "+n.currentTime+", going to "+s),e.stateMachineCallbacks.setVideoTimeStartFromEvent(n)),t===f.default.VIDEO_CHANGE?e.stateMachineCallbacks.videoChange(n):t===f.default.AUDIO_CHANGE?e.stateMachineCallbacks.audioChange(n):t===f.default.MUTE?(l.default.log("Setting sample to muted"),e.stateMachineCallbacks.mute()):t===f.default.UN_MUTE&&(l.default.log("Setting sample to unmuted"),e.stateMachineCallbacks.unMute())}},onseek:function(t,a,s,i){e.seekTimestamp=i},onseeked:function(t,a,s,i){e.seekedTimestamp=i},ontimechanged:function(t,a,s,i,n){var r=i-e.onEnterStateTimestamp;r>59700&&(e.stateMachineCallbacks.setVideoTimeEndFromEvent(n),l.default.log("Sending heartbeat"),e.stateMachineCallbacks.heartbeat(r,a.toLowerCase(),n),e.onEnterStateTimestamp=i,e.stateMachineCallbacks.setVideoTimeStartFromEvent(n))},onplayerError:function(t,a,s,i,n){e.stateMachineCallbacks.error(n)}}})}},{key:"callEvent",value:function(t,e,a){var s=this.stateMachine[t];s?s.call(this.stateMachine,a,e):l.default.log("Ignored Event: "+t)}}],[{key:"pad",value:function(t,e){var a=new Array(e).join(" ");return(t+a).slice(0,e)}}]),t}();d.PAUSE_SEEK_DELAY=200,d.SEEKED_PAUSE_DELAY=300,e.default=d},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=a(7),l=s(o),E=a(16),u=s(E),S=a(11),f=s(S),d=function(){function t(e){n(this,t),this.stateMachineCallbacks=e,this.pausedTimestamp=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.onEnterStateTimestamp=0,this.States={SETUP:"SETUP",STARTUP:"STARTUP",READY:"READY",PLAYING:"PLAYING",REBUFFERING:"REBUFFERING",PAUSE:"PAUSE",QUALITYCHANGE:"QUALITYCHANGE",PAUSED_SEEKING:"PAUSED_SEEKING",PLAY_SEEKING:"PLAY_SEEKING",END_PLAY_SEEKING:"END_PLAY_SEEKING",QUALITYCHANGE_PAUSE:"QUALITYCHANGE_PAUSE",QUALITYCHANGE_REBUFFERING:"QUALITYCHANGE_REBUFFERING",END:"END",ERROR:"ERROR",MUTING_READY:"MUTING_READY",MUTING_PLAY:"MUTING_PLAY",MUTING_PAUSE:"MUTING_PAUSE",CASTING:"CASTING"},this.createStateMachine()}return r(t,[{key:"getAllStates",value:function(){var t=this;return[].concat(i(Object.keys(this.States).map(function(e){return t.States[e]})),["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])}},{key:"createStateMachine",value:function(){var t=this;this.stateMachine=u.default.create({initial:this.States.SETUP,error:function(t,e,a,s,i,n){l.default.error("Error in statemachine: "+n)},events:[{name:f.default.TIMECHANGED,from:this.States.SETUP,to:this.States.SETUP},{name:f.default.READY,from:[this.States.SETUP,this.States.ERROR],to:this.States.READY},{name:f.default.PLAY,from:this.States.READY,to:this.States.STARTUP},{name:f.default.START_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:f.default.END_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:f.default.VIDEO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:f.default.AUDIO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:f.default.TIMECHANGED,from:this.States.STARTUP,to:this.States.PLAYING},{name:f.default.TIMECHANGED,from:this.States.PLAYING,to:this.States.PLAYING},{name:f.default.END_BUFFERING,from:this.States.PLAYING,to:this.States.PLAYING},{name:f.default.START_BUFFERING,from:this.States.PLAYING,to:this.States.REBUFFERING},{name:f.default.START_BUFFERING,from:this.States.REBUFFERING,to:this.States.REBUFFERING},{name:f.default.TIMECHANGED,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:f.default.SEEK,from:this.States.PLAYING,to:this.States.PLAY_SEEKING},{name:f.default.TIMECHANGED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.TIMECHANGED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:f.default.PAUSE,from:this.States.PLAYING,to:this.States.PAUSE},{name:f.default.PAUSE,from:this.States.REBUFFERING,to:this.States.PAUSE},{name:f.default.TIMECHANGED,from:this.States.PAUSE,to:this.States.PAUSE},{name:f.default.PLAY,from:this.States.PAUSE,to:this.States.PLAYING},{name:f.default.VIDEO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:f.default.AUDIO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:f.default.VIDEO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:f.default.AUDIO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.States.QUALITYCHANGE,to:this.States.PLAYING},{name:f.default.VIDEO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:f.default.AUDIO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:f.default.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:f.default.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.States.QUALITYCHANGE_PAUSE,to:this.States.PAUSE},{name:f.default.SEEK,from:this.States.PAUSE,to:this.States.PAUSED_SEEKING},{name:f.default.SEEK,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:f.default.AUDIO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:f.default.VIDEO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:f.default.START_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:f.default.END_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:f.default.SEEKED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:f.default.PLAY,from:this.States.PAUSED_SEEKING,to:this.States.PLAYING},{name:f.default.PAUSE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:"PLAY_SEEK",from:this.States.PAUSE,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PAUSED_SEEKING,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.SEEK,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.AUDIO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.VIDEO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.START_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.END_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:f.default.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:f.default.START_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:f.default.END_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:f.default.SEEKED,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:f.default.TIMECHANGED,from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:f.default.END,from:this.States.PLAY_SEEKING,to:this.States.END},{name:f.default.END,from:this.States.PAUSED_SEEKING,to:this.States.END},{name:f.default.END,from:this.States.PLAYING,to:this.States.END},{name:f.default.END,from:this.States.PAUSE,to:this.States.END},{name:f.default.SEEK,from:this.States.END,to:this.States.END},{name:f.default.SEEKED,from:this.States.END,to:this.States.END},{name:f.default.TIMECHANGED,from:this.States.END,to:this.States.END},{name:f.default.END_BUFFERING,from:this.States.END,to:this.States.END},{name:f.default.START_BUFFERING,from:this.States.END,to:this.States.END},{name:f.default.END,from:this.States.END,to:this.States.END},{name:f.default.PLAY,from:this.States.END,to:this.States.PLAYING},{name:f.default.ERROR,from:this.getAllStates(),to:this.States.ERROR},{name:f.default.PAUSE,from:this.States.ERROR,to:this.States.ERROR},{name:f.default.SEEK,from:this.States.END_PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:f.default.UNLOAD,from:this.getAllStates(),to:this.States.END},{name:f.default.START_AD,from:this.States.PLAYING,to:this.States.AD},{name:f.default.END_AD,from:this.States.AD,to:this.States.PLAYING},{name:f.default.MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:f.default.UN_MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:"FINISH_MUTING",from:this.States.MUTING_READY,to:this.States.READY},{name:f.default.MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:f.default.UN_MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:"FINISH_MUTING",from:this.States.MUTING_PLAY,to:this.States.PLAYING},{name:f.default.MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:f.default.UN_MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.States.MUTING_PAUSE,to:this.States.PAUSE},{name:f.default.START_CAST,from:[this.States.READY,this.States.PAUSE],to:this.States.CASTING},{name:f.default.PAUSE,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.PLAY,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.TIMECHANGED,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.MUTE,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.SEEK,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.SEEKED,from:this.States.CASTING,to:this.States.CASTING},{name:f.default.END_CAST,from:this.States.CASTING,to:this.States.READY},{name:f.default.SEEK,from:this.States.READY,to:this.States.READY},{name:f.default.SEEKED,from:this.States.READY,to:this.States.READY},{name:f.default.SEEKED,from:this.States.STARTUP,to:this.States.STARTUP},{name:f.default.SOURCE_LOADED,from:this.getAllStates(),to:this.States.SETUP},{name:f.default.VIDEO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:f.default.AUDIO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:f.default.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:f.default.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.REBUFFERING}],callbacks:{onenterstate:function(e,a,s,i,n){t.onEnterStateTimestamp=i||(new Date).getTime(),l.default.log("["+a+"] => "+e+" => ["+s+"]"),n&&s!==t.States.PAUSED_SEEKING&&s!==t.States.PLAY_SEEKING&&s!==t.States.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(n),"PLAY_SEEK"===e&&s===t.States.PLAY_SEEKING&&s!==t.States.PLAY_SEEKING&&s!==t.States.END_PLAY_SEEKING&&(t.seekTimestamp=t.onEnterStateTimestamp),e===f.default.START_CAST&&s===t.States.CASTING&&t.stateMachineCallbacks.startCasting(i,n)},onafterevent:function(e,a,s,i){s===t.States.QUALITYCHANGE&&t.stateMachine.FINISH_QUALITYCHANGE(i),s!==t.States.MUTING_READY&&s!==t.States.MUTING_PLAY&&s!==t.States.MUTING_PAUSE||t.stateMachine.FINISH_MUTING(i)},onleavestate:function(e,a,s,i,n){if(i){var r=i-t.onEnterStateTimestamp;if(n&&s!==t.States.PAUSED_SEEKING&&s!==t.States.PLAY_SEEKING&&s!==t.States.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeEndFromEvent(n),"PLAY_SEEK"===e&&a===t.States.PAUSE)return!0;var o=a.toLowerCase();if(a===t.States.END_PLAY_SEEKING||a===t.States.PAUSED_SEEKING){var E=t.seekedTimestamp-t.seekTimestamp;t.stateMachineCallbacks[o](E,o,n)}else if(e===f.default.UNLOAD&&a===t.States.PLAYING)t.stateMachineCallbacks.playingAndBye(r,o,n);else if(a===t.States.PAUSE&&s!==t.States.PAUSED_SEEKING)t.stateMachineCallbacks.setVideoTimeStartFromEvent(e),t.stateMachineCallbacks.pause(r,o,n);else{var u=t.stateMachineCallbacks[o];"function"==typeof u?u(r,o,n):l.default.error("Could not find callback function for "+o)}n&&s!==t.States.PAUSED_SEEKING&&s!==t.States.PLAY_SEEKING&&s!==t.States.END_PLAY_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(n),e===f.default.VIDEO_CHANGE?t.stateMachineCallbacks.videoChange(n):e===f.default.AUDIO_CHANGE?t.stateMachineCallbacks.audioChange(n):e===f.default.MUTE?t.stateMachineCallbacks.mute():e===f.default.UN_MUTE&&t.stateMachineCallbacks.unMute()}},onseek:function(e,a,s,i){t.seekTimestamp=i},onseeked:function(e,a,s,i){t.seekedTimestamp=i},ontimechanged:function(e,a,s,i,n){var r=i-t.onEnterStateTimestamp;r>59700&&(t.stateMachineCallbacks.setVideoTimeEndFromEvent(n),t.stateMachineCallbacks.heartbeat(r,a.toLowerCase(),n),t.onEnterStateTimestamp=i,t.stateMachineCallbacks.setVideoTimeStartFromEvent(n))},onplayerError:function(e,a,s,i,n){t.stateMachineCallbacks.error(n)}}})}},{key:"callEvent",value:function(t,e,a){var s=this.stateMachine[t];s?s.call(this.stateMachine,a,e):l.default.log("Ignored Event: "+t)}}],[{key:"pad",value:function(t,e){var a=new Array(e).join(" ");return(t+a).slice(0,e)}}]),t}();e.default=d},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),r=a(4),o=a(7),l=s(o),E=function(){function t(){i(this,t)}return n(t,[{key:"setUp",value:function(){l.default.log("setting up cast session"),this.castSession=cast.framework.CastContext.getInstance().getCurrentSession(),this.addMessageListener()}},{key:"addMessageListener",value:function(){var t=this,e=this.castSession.getApplicationMetadata();return!e||e.namespaces.indexOf(r.MESSAGE_NAMESPACE)<0?void l.default.log("No analytics on chrome cast receiver enabled!"):(l.default.log("adding message listener"),void this.castSession.addMessageListener(r.MESSAGE_NAMESPACE,function(e,a){l.default.log("Received: "+e+" "+a);try{var s=JSON.parse(a);t.handleReceiverMessage(s)}catch(t){console.error("Message parsing failed "+a)}}))}},{key:"handleReceiverMessage",value:function(t){l.default.log(t)}},{key:"sendMessage",value:function(t){var e=this.castSession.getApplicationMetadata();return!e||e.namespaces.indexOf(r.MESSAGE_NAMESPACE)<0?void l.default.log("No analytics on chrome cast receiver enabled!"):(l.default.log("Sending message: "+JSON.stringify(t)),void this.castSession.sendMessage(r.MESSAGE_NAMESPACE,t))}}]),t}();e.default=E},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),r=a(4),o=a(7),l=s(o),E=function(){function t(){i(this,t)}return n(t,[{key:"setUp",value:function(){var t=this,e=cast.receiver.CastReceiverManager.getInstance();this.messageBus=e.getCastMessageBus(r.MESSAGE_NAMESPACE,cast.receiver.CastMessageBus.MessageType.JSON),l.default.log(this.messageBus),this.messageBus.onMessage=function(e){l.default.log("Received message from cast client: "+JSON.stringify(e));var a=e.data;t.handleClientMessage(a)}}},{key:"setCallback",value:function(t){this.callback=t}},{key:"handleClientMessage",value:function(t){this.callback(t)}},{key:"sendMessage",value:function(t){this.messageBus.broadcast(t)}}]),t}();e.default=E},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={BITMOVIN:"bitmovin",JW:"jw",RADIANT:"radiant"};e.default=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={BITMOVIN:"bitmovin",AKAMAI:"akamai",FASTLY:"fastly",MAXCDN:"maxcdn",CLOUDFRONT:"cloudfront",CHINACACHE:"chinacache",BITGRAVITY:"bitgravity"};e.default=a}])});