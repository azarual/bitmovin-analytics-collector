<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bitmovin Player Test</title>
  <link href="http://vjs.zencdn.net/5.15.1/video-js.css" rel="stylesheet">
  <script src="http://vjs.zencdn.net/5.15.1/video.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-hls/5.7.0/videojs-contrib-hls.min.js"></script>
  <script type="text/javascript" src="./bitmovinanalytics.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<body>
  <div style="margin: 0 auto; width: 600px">
    <h1 style="text-align: center;">Bitmovin Player Test</h1>
    <video id="my-video" class="video-js" controls preload="false" width="600" height="300">
      <source src="https://bitmovin-a.akamaihd.net/content/dataset/abr/bbb_4sec_dash_hls_1499269613/stream-1080.m3u8" type="application/x-mpegURL">
      <p class="vjs-no-js">
        To view this video please enable JavaScript, and consider upgrading to a web browser that
        <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
      </p>
    </video>
    <h3>Task</h3>
    <p style="text-align: left">
        <ol>
          <li>Start Playback of the Video (Click on the above Player)</li>
          <li>Watch the Video for about 20 Seconds</li>
          <li>Jump to another location in the Video</li>
          <li>Watch another 20 Seconds</li>
          <li>Press Pause</li>
          <li>Rate your satisfaction with the Playback of the Video below</li>
        </ol>
        <div class="survey">
          <h3>Please Rate your Experience</h3>
          <div class="radio">
            <label>
              <input type="radio" name="experience" value="1" /> Very Dissatisfied
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="experience" value="2" /> Somewhat Dissatisfied
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="experience" value="3" /> Neither
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="experience" value="4" /> Somewhat Satisfied
            </label>
          </div>
          <div class="radio">
            <label>
              <input type="radio" name="experience" value="5" /> Very Satisfied
            </label>
          </div>
          <button disabled="disabled" class="btn btn-primary" id="take-survey">Submit</button>
        </div>
    </p>
    <h2 style="display: none" id="thanks">Thank you - your code is 3A837FD7!</h3>

  </div>
  <script type="text/javascript">

    var config = {
      key: "e73a3577-d91c-4214-9e6d-938fb936818a", //Your bitmovin analytics key
      playerKey: "a6e31908-550a-4f75-b4bc-a9d89880a733", //Your player key (bitmovin, jw, ..) (optional)
      player: 'VIDEOJS',
      cdnProvider: bitmovin.analytics.CdnProviders.AKAMAI,
      experimentName: 'Crowd Preload',
      videoId: 'Sintel',
      customData1: -1
    };
    var analytics = bitmovin.analytics(config);

    var player = videojs('my-video');

    analytics.register(player);
    document.getElementById('take-survey').onclick = function () {
      var result = document.querySelector('input[name="experience"]:checked').value;
      analytics.setCustomDataOnce({ customData1: result });
      document.getElementById('take-survey').disabled = true;
      document.getElementById('thanks').style.display = 'block';
    };
    var started = false;
    player.on('play', function () {
      if (started === false) {
        started = new Date();
      }
      window.setInterval(function () {
        var now = new Date();
        if (now - started > 40000) {
          document.getElementById('take-survey').disabled = false;
        }
      }, 500);
    });
  </script>
</body>
</html>
